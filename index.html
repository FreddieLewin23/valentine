<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine</title>
  <style>
    :root { --pink:#ff5fa2; }
    body{
      margin:0; height:100vh; display:flex; align-items:center; justify-content:center;
      background:#fff; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .card{
      width:min(520px, 92vw);
      border:4px solid var(--pink);
      border-radius:18px;
      padding:34px 26px;
      text-align:center;
      background:#ffe6f1;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      position:relative;
    }
    h1{ margin:0 0 22px; color:#b4004e; font-size:32px; }
    .btns{
      position:relative;
      height:110px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:18px;
      overflow:hidden;
    }
    button{
      font-size:18px;
      padding:12px 22px;
      border-radius:12px;
      cursor:pointer;
      user-select:none;
    }
    #yes{
      background: var(--pink);
      color:#fff;
      border:0;
    }
    #no{
      background:#fff;
      color:#b4004e;
      border:2px solid #ff9ac6;
      position:absolute;
      left:50%;
      top:50%;
      transform: translate(-50%, -50%);
      will-change: left, top;
      transition: left 140ms linear, top 140ms linear; /* smoother + slower */
    }
    .msg{
      margin-top:18px;
      color:#b4004e;
      font-weight:600;
      min-height:1.2em;
    }
    .huzzah{
      font-size:56px;
      color: var(--pink);
      font-weight:800;
      letter-spacing: 0.5px;
    }
  </style>
</head>
<body>
  <div class="card" id="card">
    <h1>Will you be my valentine?</h1>

    <div class="btns" id="arena">
      <button id="yes" type="button">Yes</button>
      <button id="no" type="button">No</button>
    </div>

    <div class="msg" id="msg"></div>
  </div>

  <script>
    const arena = document.getElementById("arena");
    const noBtn = document.getElementById("no");
    const yesBtn = document.getElementById("yes");
    const card = document.getElementById("card");

    let noX = 0;
    let noY = 0;

    function clamp(v, lo, hi) {
      return Math.max(lo, Math.min(hi, v));
    }

    function setNoPos(x, y) {
      noX = x;
      noY = y;
      noBtn.style.left = `${noX}px`;
      noBtn.style.top = `${noY}px`;
      noBtn.style.transform = "translate(0,0)";
    }

    function initNoPos() {
      const a = arena.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const x = (a.width - b.width) / 2;
      const y = (a.height - b.height) / 2;
      setNoPos(x, y);
    }

    function moveAway(clientX, clientY) {
      const a = arena.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();

      const bx = b.left + b.width / 2;
      const by = b.top + b.height / 2;

      const dx = bx - clientX;
      const dy = by - clientY;
      const dist = Math.hypot(dx, dy);

      const panicRadius = 140;

      if (dist < panicRadius) {
        const strength = (panicRadius - dist) / panicRadius;

        const speed = 5.5; // slower than before
        const ux = dx / (dist || 1);
        const uy = dy / (dist || 1);

        let nx = noX + ux * speed * strength;
        let ny = noY + uy * speed * strength;

        nx = clamp(nx, 0, a.width - b.width);
        ny = clamp(ny, 0, a.height - b.height);

        setNoPos(nx, ny);
      }
    }

    function onMouseMove(e) { moveAway(e.clientX, e.clientY); }
    function onTouchMove(e) {
      const t = e.touches[0];
      moveAway(t.clientX, t.clientY);
    }

    arena.addEventListener("mousemove", onMouseMove, { passive: true });
    arena.addEventListener("touchmove", onTouchMove, { passive: true });

    yesBtn.addEventListener("click", () => {
      // Remove the question box and show huzzah
      card.remove();
      const h = document.createElement("div");
      h.className = "huzzah";
      h.textContent = "huzzah!";
      document.body.appendChild(h);
    });

    window.addEventListener("resize", initNoPos);
    initNoPos();
  </script>
</body>
</html>


